<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.love.amei.dao.auth.UserAuthRelMapper" >
  <resultMap id="BaseResultMap" type="com.love.amei.model.auth.UserAuthRel" >
    <id column="user_auth_id" property="userAuthId" jdbcType="VARCHAR" />
    <result column="user_id" property="userId" jdbcType="VARCHAR" />
    <result column="auth_id" property="authId" jdbcType="VARCHAR" />
    <result column="rel_state" property="relState" jdbcType="INTEGER" />
  </resultMap>
  <sql id="Base_Column_List" >
    user_auth_id, user_id, auth_id, rel_state
  </sql>

  <select id="getUserAuth" resultType="com.love.amei.dto.auth.UserAuthDto">
    select uar.user_id,a.auth_id,a.auth_code,a.auth_name,a.auth_pcode,a.is_leaf
    from t_auth a
    left join t_user_auth_rel uar on (a.auth_id = uar.auth_id)
    where uar.rel_state = '1' and a.auth_state = '1'
    and uar.user_id = #{userId}
  </select>

</mapper>